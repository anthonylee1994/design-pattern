# 責任鏈模式 (Chain of Responsibility Pattern)

## 概述

責任鏈模式是一種行為設計模式，它允許你將請求沿著處理者鏈進行傳遞。收到請求後，每個處理者均可對請求進行處理，或將其傳遞給鏈上的下一個處理者。

## 實現示例

在本示例中，我們實現了一個支付系統，它使用不同的支付方式（銀行帳戶、PayPal、比特幣）來處理付款請求。每個支付方式都可以：

- 檢查自己是否能夠處理付款
- 如果無法處理，則將請求傳遞給下一個支付方式

### 核心元件

1. `Account`（抽象基類）

   - 定義了支付處理的基本結構
   - 包含設置下一個處理者的方法
   - 實現了支付邏輯和餘額檢查

2. 具體處理者
   - `Bank`：銀行帳戶支付
   - `Paypal`：PayPal 支付
   - `Bitcoin`：比特幣支付

### 工作流程

1. 創建支付處理鏈
2. 設置每個處理者的餘額
3. 使用 `setNext()` 方法將處理者連接成一個鏈
4. 從鏈的第一個處理者開始處理支付請求
5. 如果當前處理者無法處理，請求會自動傳遞給下一個處理者

### 使用範例

```java
Bank bank = new Bank(100);        // 銀行帳戶餘額：100
Paypal paypal = new Paypal(200);  // PayPal餘額：200
Bitcoin bitcoin = new Bitcoin(300);// 比特幣餘額：300

bank.setNext(paypal);
paypal.setNext(bitcoin);

bank.pay(259);  // 嘗試支付 259
```

## 優點

1. 降低了請求發送者和接收者之間的耦合度
2. 符合單一職責原則
3. 符合開閉原則，可以方便地新增處理者

## 使用場景

- 當程式需要使用不同方式處理不同種類請求，而且請求類型和順序預先未知時
- 當必須按特定順序執行多個處理者時
- 當處理者的集合和順序必須動態改變時
